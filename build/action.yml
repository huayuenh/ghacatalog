name: Image Build
description: Image Build

runs:
  using: composite
  steps:
    - name: Build Image
      id: build-image
      shell: bash
      run: |
        IMAGE_URL="$REGISTRY_HOSTNAME"/"$ICR_NAMESPACE"/"$IMAGE_NAME":"$GITHUB_SHA"
        IMAGE_NAME="$ICR_NAMESPACE"/"$IMAGE_NAME":"$GITHUB_SHA"
        docker build -t "$IMAGE_URL" \
          --build-arg GITHUB_SHA="$GITHUB_SHA" \
          --build-arg GITHUB_REF="$GITHUB_REF" .
        echo "image=$IMAGE_NAME" >> "$GITHUB_OUTPUT"